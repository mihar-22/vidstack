<script>
  import { onMount } from 'svelte';

  import '@vidstack/player/define/vds-media.js';
  import '@vidstack/player/define/vds-video.js';
  import '@vidstack/player/define/vds-media-visibility.js';

  onMount(() => {
    const mediaVisibility = document.querySelector('vds-media-visibility');

    mediaVisibility.addEventListener('vds-media-visibility-change', (event) => {
      const { page } = event.detail;
      console.log(event);
      console.log('Page state ->', page);
    });
  });
</script>

<vds-media>
  <vds-media-visibility
    enter-page="play"
    exit-page="pause"
    page-enter-delay="0"
    page-change-type="state"
  >
    <vds-video controls autoplay muted>
      <video controls preload="none" src="https://media-files.vidstack.io/360p.mp4"></video>
    </vds-video>
  </vds-media-visibility>
</vds-media>
