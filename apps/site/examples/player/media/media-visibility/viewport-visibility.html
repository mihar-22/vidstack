<script>
  import { onMount } from 'svelte';

  import '@vidstack/player/define/vds-media.js';
  import '@vidstack/player/define/vds-video.js';
  import '@vidstack/player/define/vds-media-visibility.js';

  onMount(() => {
    const mediaVisibility = document.querySelector('vds-media-visibility');

    mediaVisibility.addEventListener('vds-media-visibility-change', (event) => {
      const { viewport } = event.detail;
      console.log(event);
      console.log('Viewport state ->', viewport);
    });
  });
</script>

<vds-media>
  <vds-media-visibility
    enter-viewport="play"
    exit-viewport="pause"
    intersection-threshold="1"
    viewport-enter-delay="0"
  >
    <vds-video controls autoplay muted>
      <video controls preload="none" src="https://media-files.vidstack.io/360p.mp4"></video>
    </vds-video>
  </vds-media-visibility>
</vds-media>
